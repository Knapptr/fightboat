(this.webpackJsonpfightboat=this.webpackJsonpfightboat||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a(17)},,,,,function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(7),s=a.n(i),l=(a(14),a(15),a(16),a(1)),o=a(2),c=a(4),u=a(3),m=a(5),h=[{ship:"patrol boat",length:2},{ship:"submarine",length:3},{ship:"battleship",length:4},{ship:"destroyer",length:4},{ship:"carrier",length:5}],d=function(e){var t=[];return e.forEach((function(e){var a,n;t.push((a=e.ship,n=e.length,{name:a,length:n,sunk:!1,hitStatus:function(e){for(var t=[],a=0;a<e;a++)t.push(!1);return t}(n),assignedPosition:!1,assignToggle:function(){this.assignedPosition=!this.assignedPosition},isSunk:function(){this.hitStatus.every((function(e){return e}))&&(this.sunk=!0)},hit:function(e){this.hitStatus[e]=!0,this.isSunk()}}))})),t},f=function(){for(var e=[],t=0;t<10;t++){for(var a=[],n=0;n<10;n++)a.push({x:t,y:n,id:"".concat(String.fromCharCode(t+65)+n),shipPos:!1,attacked:!1});e.push(a)}return e},y=a(8),p=function(e,t,a,n){var r=h[a].length,i=[];return n?n&&(i=t+r>9?[e,10-r,a,n]:[e,t,a,n]):i=e+r>9?[10-r,t,a,n]:[e,t,a,n],i},g=function(e,t,a,n){var r=[],i=h[a].length;if(n)for(var s=0;s<i;s++)r.push({x:e,y:t+s,vertical:n});else for(var l=0;l<i;l++)r.push({x:e+l,y:t,vertical:n});return r},v={aiPlacement:function(){for(var e=[],t=0;t<5;t++){var a=void 0,n=void 0,r=void 0;do{r=!0,n=!!Math.floor(2*Math.random());var i=this.randomCoord(),s=p(i.x,i.y,t,n);(a=g.apply(void 0,Object(y.a)(s))).forEach((function(t){e.some((function(e){return e.some((function(e){return e.x===t.x&&e.y===t.y}))}))&&(r=!1)}))}while(!1===r);e.push(a)}return e},randomPoint:function(){return Math.floor(10*Math.random())},randomCoord:function(){return{x:this.randomPoint(),y:this.randomPoint()}},betterGuess:function(e){for(var t,a=function(){return Math.floor(2*Math.random())},n={x:-1,y:10},r=1;n.x<0||n.y<0||n.y>9||n.x>9;)r++,t=0===a()?1:-1,n=0===a()?{x:e.coordinates.x+t,y:e.coordinates.y}:{x:e.coordinates.x,y:e.coordinates.y+t},r>=4&&(n=this.randomCoord());return n},aiMove:function(e){var t,a,n=!0;a=e.length>0?e[e.length-1]:void 0;do{t=a&&"hit"===a.result?this.betterGuess(a):this.randomCoord(),n=e.some((function(e){return t.x===e.coordinates.x&&t.y===e.coordinates.y}))}while(!0===n);return t}},k=function(e){return{name:e,fleet:d(h),allSunk:!1,board:f(),attackedSquares:[],reset:function(){this.fleet=d(h),this.board=f(),this.attackedSquares=[],this.allSunk=!1},allAssigned:function(){return this.fleet.every((function(e){return e.assignedPosition}))},checkSunk:function(){this.fleet.every((function(e){return!0===e.sunk}))&&(this.allSunk=!0)},logAttackedCoords:function(e){this.attackedSquares.push(e)},attackValidityCheck:function(e){var t;return console.log("checking validity"),console.log(e),e.x+1&&e.y+1?(console.log("valid coords"),e.x>9||e.y>9?(console.log("out of range"),t=!1):t=!this.attackedSquares.some((function(t){return t.coordinates.x===e.x&&t.coordinates.y===e.y}))):t=!1,t},receiveAttack:function(e){var t={coordinates:{x:e.x,y:e.y}};(this.board[e.y][e.x].attacked=!0,this.board[e.y][e.x].shipPos)?(this.fleet[this.board[e.y][e.x].shipPos.fleetIndex].hit(this.board[e.y][e.x].shipPos.posOnShip),t.result="hit"):t.result="miss";return this.checkSunk(),t},assignShip:function(e,t,a,n){var r=this;g(e,t,n,a).forEach((function(e,t){r.fleet[n].assignedPosition=!0,r.board[e.y][e.x].shipPos={fleetIndex:n,posOnShip:t,nameID:h[n].ship}}))},batchAssign:function(e){var t=this;this.board=f(),e.forEach((function(e,a){t.assignShip(e[0].x,e[0].y,e[0].vertical,a)}))},randomShipAssignment:function(){this.reset(),this.batchAssign(v.aiPlacement())},aiAttack:function(){return v.aiMove(this.attackedSquares)}}},E=function(e,t){var a,n=t.find((function(t){return t.coordinates.x===e.x&&t.coordinates.y===e.y}));return n&&(a="hit"===n.result?"attackHit":"attackMiss"),a},S=function(e){return e.attackState?e.shipPos?"attackHit":"attackMiss":null},b=function(e){return r.a.createElement("div",{onClick:function(){e.clickHandler({x:e.x,y:e.y})},className:"boardSquare attack "+E({x:e.x,y:e.y},e.attackArray)},e.squareID)},P=function(e){return r.a.createElement("div",{className:"boardSquare defend "+(e.shipPos?"ship":"empty")+" "+S(e)},e.squareID)},x=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"bolded centered boardTitle"},"Attack Coordinates"),r.a.createElement("div",{id:"attackBoard",className:"boardElement"},(e=this.props.player,t=this.props.clickHandler,e.board.map((function(a,n){return r.a.createElement("div",{className:"row"},a.map((function(a,i){return r.a.createElement(b,{attackArray:e.attackedSquares,clickHandler:t,key:a.id,x:n,y:i,squareID:a.id})})))})))));var e,t}}]),t}(n.Component),A=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"bolded centered boardTitle"},"Your Fleet"),r.a.createElement("div",{id:"defendBoard",className:"boardElement"},(e=this.props.player.board).map((function(t,a){return r.a.createElement("div",{className:"row"},t.map((function(t,n){return r.a.createElement(P,{key:t.id,squareID:t.id,shipPos:e[a][n].shipPos,attackState:e[a][n].attacked})})))}))));var e}}]),t}(n.Component),O=function(e){return r.a.createElement("div",null,r.a.createElement("div",{id:"assignmentBoard"},r.a.createElement(A,{player:e.player})),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{onClick:e.assigner},"Randomize Ship Placement"),e.player.allAssigned()?r.a.createElement("p",{className:"bolded clickable ",onClick:e.start},"Click to Start"):r.a.createElement("p",null,"Choose a Placement")))},C=function(e){var t=e.player.fleet;return r.a.createElement("div",{className:"fleetStatus"},r.a.createElement("p",{className:"bolded centered statusTitle"},e.name.toUpperCase()+" fleet Status"),r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Ship"),r.a.createElement("th",null,"Size"),r.a.createElement("th",null,"Status")),t.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",{className:e.sunk?"sunkStatusText":"operationStatusText"},e.name),r.a.createElement("td",null,e.length),r.a.createElement("td",{className:(e.sunk?"sunkStatusText":"operationStatusText")+" statusBulb"},r.a.createElement("i",{className:"fas fa-circle"})))}))))},N=function(e){var t=e.ai.attackedSquares.filter((function(e){return"hit"===e.result})),a=e.player.attackedSquares.filter((function(e){return"hit"===e.result})),n=e.ai.fleet.filter((function(e){return e.sunk})),i=e.player.fleet.filter((function(e){return e.sunk}));return r.a.createElement("div",{className:"statsBlock"},r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Player Attacks Made"),r.a.createElement("td",null,e.player.attackedSquares.length)),r.a.createElement("tr",null,r.a.createElement("td",null,"Hits"),r.a.createElement("td",null,a.length)),r.a.createElement("tr",null,r.a.createElement("td",null,"Ships Sunk"),r.a.createElement("td",null,n.length)),r.a.createElement("tr",null,r.a.createElement("td",null,"AI Attacks Made"),r.a.createElement("td",null,e.ai.attackedSquares.length)),r.a.createElement("tr",null,r.a.createElement("td",null,"Hits"),r.a.createElement("td",null,t.length)),r.a.createElement("tr",null,r.a.createElement("td",null,"Ships Sunk"),r.a.createElement("td",null,i.length))))},T=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={humanPlayer:k("human"),aiPlayer:k("ai"),humanTurn:!0,gameOver:!1,message:"Place your ships...",gamePlaying:!1},a.resetGame=function(){a.setState({humanPlayer:k("human"),aiPlayer:k("ai"),humanTurn:!0,gameOver:!1,message:"Place your ships...",gamePlaying:!1})},a.gameOverMessage=function(){return a.state.humanPlayer.allSunk?r.a.createElement("h1",{className:"centered"},"You Lose."):r.a.createElement("h1",{className:"centered"},"You Win!")},a.playerAssign=function(){a.setState((function(e){var t=e.humanPlayer;return t.randomShipAssignment(),{humanPlayer:t}}))},a.startGame=function(){a.setState((function(e){var t=e.aiPlayer;return t.randomShipAssignment(),{gamePlaying:!0,aiPlayer:t,message:"Awaiting Attack Coordinates..."}}))},a.aiMove=function(){a.state.humanTurn||a.state.gameOver||a.setState({message:"Returning Fire"},(function(){setTimeout((function(){a.setState((function(e){var t=e.aiPlayer,a=e.humanPlayer;e.humanTurn;return t.logAttackedCoords(a.receiveAttack(t.aiAttack())),{humanPlayer:a,aiPlayer:t,humanTurn:!0,message:"Awaiting Attack Coordinates."}}))}),500)}))},a.takeTurn=function(e){a.state.humanTurn&&a.setState((function(t){var a,n,r=t.aiPlayer,i=t.humanPlayer,s=t.humanTurn;if(i.attackValidityCheck(e))return i.logAttackedCoords(r.receiveAttack(e)),s=!s,r.allSunk?(a=!0,n="Game Over!"):a=!1,{humanPlayer:i,aiPlayer:r,humanTurn:s,gameOver:a,message:n};alert("invalid attack!")}),a.aiMove)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e;return e=this.state.gamePlaying?this.state.gameOver?r.a.createElement("div",{id:"gameOverScreen"},this.gameOverMessage(),r.a.createElement(N,{player:this.state.humanPlayer,ai:this.state.aiPlayer}),r.a.createElement("button",{onClick:this.resetGame},"Play Again")):r.a.createElement("div",{id:"playBoard"},r.a.createElement(x,{player:this.state.humanPlayer,clickHandler:this.takeTurn}),r.a.createElement("div",{id:"statusBar"},r.a.createElement(C,{player:this.state.aiPlayer,name:"enemy"}),r.a.createElement(C,{player:this.state.humanPlayer,name:"player"})),r.a.createElement(A,{player:this.state.humanPlayer})):r.a.createElement("div",{id:"displayBoard"},r.a.createElement(O,{player:this.state.humanPlayer,assigner:this.playerAssign,start:this.startGame})),r.a.createElement("div",{id:"boardWindow"},r.a.createElement("div",{id:"messageBar",className:"centered"},this.state.message),e)}}]),t}(n.Component);var j=function(){return r.a.createElement("div",null,r.a.createElement("h1",{className:"fightBoats"},"FightBoat"),r.a.createElement(T,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.8500ba89.chunk.js.map